<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--Start of external scripts-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.js"></script>
<!--End of external scripts-->

<!-- Steyle Sheet -->
<link rel="stylesheet" type="text/css" href="css/phxMediExpanStyle.css">


<div id="wexford-wrapper">
    <!--START OF VIDEO LAYER-->
    <div class="videoLayer-wexford">
        <video muted playsinline id="bgVideo-wexford">
            <source id="WexfordVideo" src="" type="video/mp4">
        </video>
    </div>
    <!--END OF VIDEO LAYER-->

    <!--START OF TEXT LAYER -->
    <div class="wex-text-box-container">
        <p class="wex-text-box" id="overlay-text-wexford">Wexford Science & Technology's so-called "innovation center"
            <br>will house ASU programs and science startups at 850 North 5th Street.</p>
        <p class="wex-text-box" id="overlay-text-wexford-02">This is a 227,000 square feet expansion <br>that company
            executives say is expected to add over 500 jobs.</p>
        <p class="wex-text-box" id="overlay-text-wexford-03">On the first floor, the building will host a startup
            incubator
            company <br>called Center for Entrepreneurial Innovation.<br><br>This 6,500 square foot space will be used
            to
            help launch
            <br>new bioscience and health care companies and the company <br>aims to create 600 or more jobs over the
            next
            five years.</p>
        <p class="wex-text-box" id="overlay-text-wexford-04">Four floors of the building will be for ASUâ€™s Health
            Futures
            Center.<br>This center will be a total of 150,000 square feet across four floors <br> and will expand the
            university's downtown biomedical campus.</p>
        <p class="wex-text-box" id="overlay-text-wexford-05">The university will partner with <br>Mayo Clinic to do
            joint
            health
            care research at the center.</p>
        <p class="wex-text-box" id="overlay-text-wexford-06">The rest of the space in the Wexford building <br>will be
            rented to
            private science and technology companies, start-ups or researchers.</p>
        <!-- <p class="text-box-wex" id="overlay-text-wexford-07"></p>
    <p class="text-box-wex" id="overlay-text-wexford-08"></p> -->
    </div>
    <!--END OF TEXT LAYER -->
</div>

<script>
    //For screensize smaller than 1200px, load mobile video
    window.addEventListener("resize", switchBGVideo);

    function switchBGVideo() {
        var bgVideo = $("#bgVideo-wexford");
        var windowWidth = $(window).width();
        if (windowWidth < 1200) {
            bgVideo.attr("src", "videos/WexfordMo.mp4");
        }
        else {
            bgVideo.attr("src", "videos/WexfordDe.mp4");
        }
    }

    switchBGVideo();
    //END OF SECTION

    const videoLayerWexford = document.querySelector('.videoLayer-wexford');
    const videoWexford = videoLayerWexford.querySelector('video');

    function pauseWexfordVid () {
        videoWexford.pause();
    }
    pauseWexfordVid();

    // init controller
    let controller = new ScrollMagic.Controller();

    // build video scene
    let Wexfordscene = new ScrollMagic.Scene({
        triggerElement: videoLayerWexford,
        triggerHook: 0,
        offset: 0,
        duration: 14000
    })
        //.addIndicators({ name: "--- videoPlayer" })
        .setPin(videoLayerWexford)
        .addTo(controller);

    //Creating Video Animation
    let accelamount = 0.2;
    // to decrease delay effect, increase the number
    let scrollpos = 0;
    let delay = 0;
    let frameRate = 30;

    Wexfordscene.on('update', e => {
        scrollpos = e.scrollPos / 1000;
        //video.currentTime = e.scrollPos * (video duration/duration)
        console.log("e.scrollPos / 1000 =" + e.scrollPos / 1000);
        console.log("scrollPos =" + e.scrollPos);
        //e.scrollPos comes from Scroll Magic and it is connect with the duration
    });

    setInterval(() => {
        delay += (scrollpos - delay) * accelamount;
        console.log(scrollpos, delay);

        videoWexford.currentTime = delay;
        console.log('video current time =' + videoWexford.currentTime);
    }, 1000 / frameRate);
    // video.currentTime indicates the position for the playback of the video, in seconds

    // textLayer.overlayText01 pin and scroll up
    let Wexfordscene3 = new ScrollMagic.Scene({
        duration: 2400,
        triggerElement: "#overlay-text-wexford",
        triggerHook: 1,
    })
        // .addIndicators({ name: "--- Wexford Layer" })
        .setPin('#overlay-text-wexford')
        .addTo(controller);

    let Wexfordscene4 = new ScrollMagic.Scene({
        offset: 2400,
        duration: 1000,
        triggerElement: "#overlay-text-wexford",
        triggerHook: 0.7,
    })
        //.addIndicators({ name: "--- scene 5 Wexford Layer" })
        .setPin('#overlay-text-wexford')
        .addTo(controller);

    // textLayer.overlayText02 pin and scroll up
    let Wexfordscene5 = new ScrollMagic.Scene({
        duration: 4200,
        triggerElement: "#overlay-text-wexford-02",
        triggerHook: 1,
    })
        //.addIndicators({ name: "--- overlay-text-02" })
        .setPin('#overlay-text-wexford-02')
        .addTo(controller);

    let Wexfordscene6 = new ScrollMagic.Scene({
        offset: 4200,
        duration: 1000,
        triggerElement: "#overlay-text-wexford-02",
        triggerHook: 0.7,
    })
        //.addIndicators({ name: "--- overlay-text-wexford-02" })
        .setPin('#overlay-text-wexford-02')
        .addTo(controller);

    // textLayer.overlayText03 pin and scroll up
    let Wexfordscene7 = new ScrollMagic.Scene({
        duration: 6000,
        triggerElement: "#overlay-text-wexford-03",
        triggerHook: 1,
    })
        //.addIndicators({ name: "--- overlay-text-02" })
        .setPin('#overlay-text-wexford-03')
        .addTo(controller);

    let Wexfordscene8 = new ScrollMagic.Scene({
        offset: 6000,
        duration: 1000,
        triggerElement: "#overlay-text-wexford-03",
        triggerHook: 0.7,
    })
        //.addIndicators({ name: "--- overlay-text-wexford-02" })
        .setPin('#overlay-text-wexford-03')
        .addTo(controller);

    // textLayer.overlayText04 pin and scroll up
    let Wexfordscene9 = new ScrollMagic.Scene({
        duration: 8000,
        triggerElement: "#overlay-text-wexford-04",
        triggerHook: 1,
    })
        //.addIndicators({ name: "--- overlay-text-02" })
        .setPin('#overlay-text-wexford-04')
        .addTo(controller);

    let Wexfordscene10 = new ScrollMagic.Scene({
        offset: 8000,
        duration: 1500,
        triggerElement: "#overlay-text-wexford-04",
        triggerHook: 0.7,
    })
        //.addIndicators({ name: "--- overlay-text-wexford-02" })
        .setPin('#overlay-text-wexford-04')
        .addTo(controller);

    // textLayer.overlayText05 pin and scroll up
    let Wexfordscene11 = new ScrollMagic.Scene({
        duration: 10500,
        triggerElement: "#overlay-text-wexford-05",
        triggerHook: 1,
    })
        //.addIndicators({ name: "--- overlay-text-02" })
        .setPin('#overlay-text-wexford-05')
        .addTo(controller);

    let Wexfordscene12 = new ScrollMagic.Scene({
        offset: 10500,
        duration: 1000,
        triggerElement: "#overlay-text-wexford-05",
        triggerHook: 0.7,
    })
        //.addIndicators({ name: "--- overlay-text-wexford-02" })
        .setPin('#overlay-text-wexford-05')
        .addTo(controller);

    // textLayer.overlayText06 pin and scroll up
    let Wexfordscene13 = new ScrollMagic.Scene({
        duration: 12000,
        triggerElement: "#overlay-text-wexford-06",
        triggerHook: 1,
    })
        //.addIndicators({ name: "--- overlay-text-02" })
        .setPin('#overlay-text-wexford-06')
        .addTo(controller);

    let Wexfordscene14 = new ScrollMagic.Scene({
        offset: 12000,
        duration: 1000,
        triggerElement: "#overlay-text-wexford-06",
        triggerHook: 0.5,
    })
        //.addIndicators({ name: "--- overlay-text-wexford-02" })
        .setPin('#overlay-text-wexford-06')
        .addTo(controller);

</script>